{"ast":null,"code":"import _classCallCheck from \"/home/alessandro/Documenti/projects/react/close2me/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/alessandro/Documenti/projects/react/close2me/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/alessandro/Documenti/projects/react/close2me/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/alessandro/Documenti/projects/react/close2me/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/alessandro/Documenti/projects/react/close2me/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/alessandro/Documenti/projects/react/close2me/src/components/categories.tsx\";\nimport * as React from 'react';\nimport Campo from './campo';\nimport axios from 'axios';\nimport '../index.css';\nvar FIVE_SECONDS = 5000;\nvar FIVE_MINUTES = 300000;\nvar COLOR = [\"LightCoral\", \"cyan\", \"SkyBlue\", \"LightYellow\"];\nvar divStyle = {\n  fontWeight: \"bold\",\n  fontSize: 72,\n  textAlign: \"center\",\n  background: \"green\"\n};\n\nvar Ticket =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Ticket, _React$Component);\n\n  function Ticket(props) {\n    var _this;\n\n    _classCallCheck(this, Ticket);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Ticket).call(this, props));\n\n    _this.getTickets = function () {\n      if (_this.state.intervalId != null) {\n        clearInterval(_this.state.intervalId);\n      }\n\n      axios.get('http://10.30.102.34:8090/ticket/all').then(function (res) {\n        if (res.data.length > 0) {\n          var intervalId = setInterval(_this.nextTicket, FIVE_SECONDS);\n\n          _this.setState({\n            message: \"\",\n            tickets: res.data,\n            intervalId: intervalId\n          });\n        } else {\n          _this.setState({\n            message: \"TWS\",\n            tickets: [],\n            intervalId: null\n          });\n        }\n      }).catch(function (error) {\n        _this.setState({\n          tickets: [],\n          message: error.message\n        });\n      });\n    };\n\n    _this.nextTicket = function () {\n      if (_this.state.counter == _this.state.tickets.length) {\n        _this.setState({\n          counter: 0\n        });\n      }\n\n      _this.setState({\n        ticket: _this.state.tickets[_this.state.counter],\n        counter: _this.state.counter + 1,\n        backgroundColor: COLOR[_this.state.counter]\n      });\n    };\n\n    _this.state = {\n      message: \"\",\n      tickets: [],\n      ticket: {\n        errore: \"\",\n        nome: \"\",\n        twsappl: \"\",\n        destinatario: \"\"\n      },\n      counter: 0,\n      backgroundColor: COLOR[0],\n      intervalId: null\n    };\n    return _this;\n  }\n\n  _createClass(Ticket, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getTickets();\n      setInterval(this.getTickets, FIVE_MINUTES);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.tickets.length == 0) {\n        return React.createElement(\"div\", {\n          style: divStyle,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }, this.state.message);\n      } else {\n        return React.createElement(\"div\", {\n          className: \"table\",\n          style: {\n            backgroundColor: COLOR[this.state.counter % 4]\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"tableBody\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"cell middle widthHalf\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }, React.createElement(Campo, {\n          value: this.state.ticket.errore,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"cell middle widthHalf\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, React.createElement(Campo, {\n          value: this.state.ticket.nome,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"cell middle widthHalf\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        }, React.createElement(Campo, {\n          value: this.state.ticket.twsappl,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"cell middle widthHalf\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, React.createElement(Campo, {\n          value: this.state.ticket.destinatario,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        })))));\n      }\n    }\n  }]);\n\n  return Ticket;\n}(React.Component);\n\nexport { Ticket as default };","map":{"version":3,"sources":["/home/alessandro/Documenti/projects/react/close2me/src/components/categories.tsx"],"names":["React","Campo","axios","FIVE_SECONDS","FIVE_MINUTES","COLOR","divStyle","fontWeight","fontSize","textAlign","background","Ticket","props","getTickets","state","intervalId","clearInterval","get","then","res","data","length","setInterval","nextTicket","setState","message","tickets","catch","error","counter","ticket","backgroundColor","errore","nome","twsappl","destinatario","Component"],"mappings":"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","sourcesContent":["import * as React from 'react';\r\nimport Campo from './campo';\r\nimport axios from 'axios';\r\nimport '../index.css';\r\n\r\nconst FIVE_SECONDS: number = 5000;\r\nconst FIVE_MINUTES: number = 300000;\r\n\r\nconst COLOR: string[] = [\"LightCoral\", \"cyan\", \"SkyBlue\", \"LightYellow\"];\r\n\r\nvar divStyle: React.CSSProperties = {\r\n  fontWeight: \"bold\",\r\n  fontSize: 72,\r\n  textAlign: \"center\",\r\n  background: \"green\"\r\n};\r\n\r\ntype TypeTicket = {\r\n  errore: string;\r\n  nome: string;\r\n  twsappl: string;\r\n  destinatario: string;\r\n}\r\n\r\ntype State = {\r\n  message: string;\r\n  tickets: [];\r\n  ticket: TypeTicket;\r\n  counter: number;\r\n  backgroundColor: string,\r\n  intervalId: any\r\n}\r\n\r\nexport default class Ticket extends React.Component<void, State> {\r\n\r\n  constructor(props: any) {\r\n    super(props);\r\n    this.state = {\r\n      message: \"\",\r\n      tickets: [],\r\n      ticket: {\r\n        errore: \"\",\r\n        nome: \"\",\r\n        twsappl: \"\",\r\n        destinatario: \"\"\r\n      },\r\n      counter: 0,\r\n      backgroundColor: COLOR[0],\r\n      intervalId: null\r\n    }\r\n  }\r\n\r\n  getTickets = () => {\r\n    if (this.state.intervalId != null) {\r\n      clearInterval(this.state.intervalId);\r\n    }\r\n    axios\r\n      .get('http://10.30.102.34:8090/ticket/all')\r\n      .then(res => {\r\n        if(res.data.length > 0) {\r\n          var intervalId = setInterval(this.nextTicket, FIVE_SECONDS);\r\n          this.setState({ message: \"\", tickets: res.data, intervalId: intervalId });\r\n        } else {\r\n          this.setState({ message: \"TWS\", tickets: [], intervalId: null });\r\n        }\r\n      }).catch(error => {\r\n        this.setState({ tickets: [], message: error.message });\r\n      });\r\n  }\r\n\r\n  nextTicket = () => {\r\n    if (this.state.counter == this.state.tickets.length) {\r\n      this.setState({ counter: 0 });\r\n    }\r\n    this.setState({\r\n      ticket: this.state.tickets[this.state.counter], counter: this.state.counter + 1,\r\n      backgroundColor: COLOR[this.state.counter]\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getTickets();\r\n    setInterval(this.getTickets, FIVE_MINUTES);\r\n  }\r\n\r\n  render() {\r\n    if (this.state.tickets.length == 0) {\r\n      return (\r\n        <div style={divStyle}>{this.state.message}</div>\r\n      );\r\n    }\r\n    else {\r\n      return (\r\n        <div className=\"table\" style={{ backgroundColor: COLOR[this.state.counter % 4] }} >\r\n          <div className=\"tableBody\" >\r\n            <div className=\"row\">\r\n              <div className=\"cell middle widthHalf\">\r\n                <Campo value={this.state.ticket.errore} />\r\n              </div>\r\n              <div className=\"cell middle widthHalf\">\r\n                <Campo value={this.state.ticket.nome} />\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"cell middle widthHalf\">\r\n                <Campo value={this.state.ticket.twsappl} />\r\n              </div>\r\n              <div className=\"cell middle widthHalf\">\r\n                <Campo value={this.state.ticket.destinatario} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}